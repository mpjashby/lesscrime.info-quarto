{"title":"Chart: One in ten of us is on the National DNA Database","markdown":{"yaml":{"title":"Chart: One in ten of us is on the National DNA Database","author":"Matt Ashby","date":"2019-12-16","slug":"dna-database","categories":["Crime and justice chart of the week"],"tags":["DNA","criminal justice","ethnicity"]},"headingText":"custom packages not loaded by helpers.R","containsRefs":false,"markdown":"\n\n```{r set knitr options, include=FALSE}\nknitr::opts_chunk$set(cache = FALSE, include=FALSE)\n```\n\n```{r set chart parameters}\nchart_details <- list(\n\tid = \"dna-database\",\n\ttitle = \"One in ten of us is on the National DNA Database\",\n\tsubtitle = \"About 5.3 million people in England and Wales (about 10% of the population aged 10 or over) have their DNA stored on the National DNA Database, one of the largest DNA databases in the world. Police routinely collect DNA from arrested suspects, and it can be stored (often permanently) if they are convicted of almost any offence.\",\n\tsource_url = \"https://www.gov.uk/government/statistics/national-dna-database-statistics\",\n\tsource_title = \"Home Office, 2019\"\n)\n```\n\n```{r load packages and helper}\nlibrary(\"reticulate\")\n\n# load this after loading custom packages\nsource(here::here(\"helpers.R\"))\n```\n\n```{r get and tidy data}\nif (!file.exists(paste0(chart_details$id, \"-data.csv.gz\"))) {\n\t\n\t# download most-recent data\n\tnew_data_file <- tempfile(fileext = \".ods\")\n\tcsv_file <- paste0(new_data_file, \".csv\")\n\tGET(\"https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/818992/NDNAD_Website_statistics_Q1_19-20.ods\", write_disk(new_data_file))\n\t\n\t# convert new data from ODS to CSV and read\n\tsource_python(here::here(\"ods_to_csv.py\"))\n\tods_to_csv(new_data_file, \"Sheet1\", csv_file)\n\n\t# read data\n\tfile_data <- read_csv(csv_file, skip = 71)\n\t\n\t# tidy data\n\ttidy_data <- file_data %>% \n\t\tslice(1:7) %>% \n\t\tselect(1:2) %>% \n\t\tjanitor::clean_names() %>% \n\t\tmutate(subject_profiles = as.numeric(subject_profiles))\n\t\n\t# save tidy data\n\twrite_csv(tidy_data, paste0(chart_details$id, \"-data.csv.gz\"))\t\n\t\n} else {\n\t\n\t# load tidy data\n\ttidy_data <- read_csv(paste0(chart_details$id, \"-data.csv.gz\"))\n\t\n}\n\nif (!file.exists(paste0(chart_details$id, \"-ethnicity-data.csv.gz\"))) {\n\n\tpop_data <- read_csv(\"https://www.ethnicity-facts-figures.service.gov.uk/uk-population-by-ethnicity/demographics/age-groups/latest/downloads/age-groups.csv\") %>% \n\t\tpivot_longer(-Ethnicity, names_to = \"age_group\", values_to = \"people\") %>% \n\t\tjanitor::clean_names() %>% \n\t\twrite_csv(paste0(chart_details$id, \"-ethnicity-data.csv.gz\"))\n\t\n} else {\n\t\n\t# load population data\n\tpop_data <- read_csv(paste0(chart_details$id, \"-ethnicity-data.csv.gz\"))\n\t\n}\n```\n\n```{r prepare data for chart}\n# harmonise population ethnicity categories\npop_data <- pop_data %>% \n\t\tmutate(ethnicity = case_when(\n\t\t\tstr_detect(ethnicity, \"White and Black\") ~ \n\t\t\t\t\"Black/African/Caribbean/Black British: Total\",\n\t\t\tstr_detect(ethnicity, \"White and Asian\") ~ \"Asian/Asian British: Total\",\n\t\t\tstr_detect(ethnicity, \"Other Mixed\") ~ \n\t\t\t\t\"Other ethnic group: Total\",\n\t\t\tTRUE ~ ethnicity\n\t\t)) %>% \n\t\tfilter(\n\t\t\tstr_detect(ethnicity, \"Total$\"), \n\t\t\t!age_group %in% c(\"All ages\", \"Age 0 to 4\", \"Age 5 to 7\", \"Age 8 to 9\")\n\t\t) %>% \n\t\tgroup_by(ethnicity) %>% \n\t\tsummarise(people = sum(people)) %>% \n\t\tfilter(ethnicity != \"Mixed/multiple ethnic group: Total\") %>% \n\t\tmutate(ethnicity = recode(\n\t\t\tethnicity, \n\t\t\t\"Asian/Asian British: Total\" = \"Asian\", \n\t\t\t\"Black/African/Caribbean/Black British: Total\" = \"Black\", \n\t\t\t\"Other ethnic group: Total\" = \"Other\", \n\t\t\t\"White: Total\" = \"White\"\n\t\t)) %>% \n\trename(population = people)\n\nchart_data <- tidy_data %>% \n\tmutate(ethnicity = case_when(\n\t\tethnic_appearance %in% c(\"White North European\", \"White South European\") ~ \n\t\t\t\"White\",\n\t\tethnic_appearance %in% c(\"Chinese, Japanese or SE Asian\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t \"Middle Eastern\") ~ \"Other\",\n\t\tTRUE ~ ethnic_appearance\n\t)) %>% \n\tgroup_by(ethnicity) %>% \n\tsummarise(profiles = sum(subject_profiles)) %>% \n\tleft_join(pop_data, by = \"ethnicity\") %>% \n\tdrop_na() %>% \n\tmutate(\n\t\t# decrease the number of profiles in each category by 14.1% to account for\n\t\t# the estimated proportion of DNA profiles that are duplicates\n\t\tprofiles = profiles * (1 - 0.141),\n\t\tnot_on_db = population - profiles\n\t) %>% \n\tselect(-population) %>% \n\tgather(\"on_ndnad\", \"people\", -ethnicity) %>% \n\tmutate(\n\t\tethnicity = factor(str_to_lower(ethnicity), \n\t\t\t\t\t\t\t\t\t\t\t levels = c(\"white\", \"asian\", \"black\", \"other\")),\n\t\tethnicity = fct_recode(ethnicity, \"Asian\" = \"asian\"),\n\t\ton_ndnad = on_ndnad == \"profiles\"\n\t) %>% \n\tarrange(desc(ethnicity)) %>% \n\tgroup_by(ethnicity) %>% \n\tmutate(\n\t\ton_ndnad = fct_rev(factor(on_ndnad)),\n\t\tpopulation = sum(people),\n\t\tprop = people / population,\n\t\txmin = ifelse(on_ndnad == TRUE, 0, 1 - prop),\n\t\txmax = ifelse(on_ndnad == TRUE, prop, 1)\n\t) %>% \n\tungroup() %>% \n\tgroup_by(on_ndnad) %>% \n\tmutate(\n\t\tymax = cumsum(population) + (sum(population) * 0.01),\n\t\tymin = ymax - population,\n\t\tycen = ymin + (0.5 * (ymax - ymin)),\n\t\tymax = ymax - (sum(population) * 0.01),\n\t\tlabel = ifelse(on_ndnad == TRUE, as.character(ethnicity), NA)\n\t) %>% \n\tungroup()\n\n# add chart labels\nchart_labels <- tribble(\n\t~x, ~y, ~xend, ~yend, ~label, ~hjust, ~vjust, ~curve,\n\t0.1, 56075912 * 0.5, 0.15, 56075912 * 0.5, balance_lines(\"most people on the DNA database are white, simply because most of the population is white\", 3), \"left\", \"center\", \"right\",\n\t0.13, 56075912 * 0.07, 0.18, 56075912 * 0.18, balance_lines(\"black people are twice as likely to have their DNA stored on the database, compared to white people\", 3), \"left\", \"bottom\", \"left\"\n)\n```\n\n```{r build plot}\nchart <- ggplot(chart_data, aes(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax, \n\t\t\t\t\t\t\t\t\t\t\t fill = on_ndnad)) +\n\tgeom_rect() +\n\tgeom_text(aes(x = 1, y = ycen, label = label), hjust = 0, nudge_x = 0.01,\n\t\t\t\t\t\tna.rm = TRUE, size = (11 * 0.8) / (14 / 5), colour = \"grey30\") +\n\t# add explanatory labels\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"right\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_segment(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"straight\"), \n\t\t\t\t\t\t inherit.aes = FALSE, colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"left\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature * -1, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_label(aes(x = xend, y = yend, label = label, hjust = hjust, \n\t\t\t\t\t\t\t\t vjust = vjust),\n\t\t\t\t\t\tdata = chart_labels, inherit.aes = FALSE, \n\t\t\t\t\t\tcolour = \"black\",\n\t\t\t\t\t\tfill = ucl_colours_list[[\"Light Green\"]], \n\t\t\t\t\t\tsize = elements$label_text_size, \n\t\t\t\t\t\tlineheight = elements$label_text_lineheight,\n\t\t\t\t\t\tlabel.size = NA, show.legend = FALSE) +\n\t# end of explanatory labels\n\tscale_x_continuous(breaks = seq(0, 1, by = 0.1), \n\t\t\t\t\t\t\t\t\t\t labels = scales::percent_format(accuracy = 1), \n\t\t\t\t\t\t\t\t\t\t expand = expand_scale(mult = c(0, 0.05))) +\n\tscale_y_continuous(expand = c(0, 0), \n\t\t\t\t\t\t\t\t\t\t labels = scales::number_format(accuracy = 1, scale = 1/1e6, \n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t suffix = \"m\")) +\n\t# the false value is a 90% tint from https://www.color-hex.com/color/500778\n  scale_fill_manual(\n    values = c(`TRUE` = ucl_colours_list[[\"Dark Green\"]], \n    \t\t\t\t\t `FALSE` = ucl_colours_list[[\"Light Green\"]]),\n    labels = c(`TRUE` = \"people on DNA database  \", \n    \t\t\t\t\t `FALSE` = \"people not on DNA database\")\n  ) +\n\tcoord_cartesian(clip = \"off\") +\n\tlabs(\n\t\ttitle = chart_details$title,\n\t\tsubtitle = format_subtitle(chart_details$subtitle),\n\t\tlegend = NULL,\n\t\tx = \"proportion of people in an ethnic group\",\n\t\ty = \"population\",\n\t\tfill = NULL\n\t) +\n\ttheme_cjcharts() +\n\ttheme(\n\t\tpanel.grid = element_blank()\n\t)\n```\n\n`r chart_details$subtitle`\n\n```{r display plot, echo=FALSE, include=TRUE}\nadd_logo(chart + labs(title = NULL, subtitle = NULL), \n\t\t\t\t chart_details$source_title, chart_details$id)\n```\n\n[larger image](../`r chart_details$id`.png)\n| [annotated R code to produce this chart](https://github.com/mpjashby/lesscrime.info/blob/master/content/post/`r chart_details$id`.Rmd)\n\nData source: [`r chart_details$source_title`](`r chart_details$source_url`)\n\nThe estimated proportion of people on the National DNA Database attempts to take \naccount of the presence of duplicate records on the database by reducing the \nnumber of samples in each category by 14.1%, the estimated proportion of records \nthat are duplicates. See the data source for more information.\n\nSince the National DNA Database does not have an equivalent ethnicity category\nto the 'Mixed/multiple ethnic group' categories in population data, people in \nthese groups have been categorised on this chart as being of Black, Asian or \nother ethnicity.\n\n```{r export chart}\n# save PNG for social media\nggsave(\n\tfilename = paste0(chart_details$id, \".png\"), \n\tplot = add_logo(chart, chart_details$source_title, chart_details$id), \n\tdevice = \"png\", width = 600 / 72, height = 400 / 72, units = \"in\"\n)\n```\n","srcMarkdownNoYaml":"\n\n```{r set knitr options, include=FALSE}\nknitr::opts_chunk$set(cache = FALSE, include=FALSE)\n```\n\n```{r set chart parameters}\nchart_details <- list(\n\tid = \"dna-database\",\n\ttitle = \"One in ten of us is on the National DNA Database\",\n\tsubtitle = \"About 5.3 million people in England and Wales (about 10% of the population aged 10 or over) have their DNA stored on the National DNA Database, one of the largest DNA databases in the world. Police routinely collect DNA from arrested suspects, and it can be stored (often permanently) if they are convicted of almost any offence.\",\n\tsource_url = \"https://www.gov.uk/government/statistics/national-dna-database-statistics\",\n\tsource_title = \"Home Office, 2019\"\n)\n```\n\n```{r load packages and helper}\n# custom packages not loaded by helpers.R\nlibrary(\"reticulate\")\n\n# load this after loading custom packages\nsource(here::here(\"helpers.R\"))\n```\n\n```{r get and tidy data}\nif (!file.exists(paste0(chart_details$id, \"-data.csv.gz\"))) {\n\t\n\t# download most-recent data\n\tnew_data_file <- tempfile(fileext = \".ods\")\n\tcsv_file <- paste0(new_data_file, \".csv\")\n\tGET(\"https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/818992/NDNAD_Website_statistics_Q1_19-20.ods\", write_disk(new_data_file))\n\t\n\t# convert new data from ODS to CSV and read\n\tsource_python(here::here(\"ods_to_csv.py\"))\n\tods_to_csv(new_data_file, \"Sheet1\", csv_file)\n\n\t# read data\n\tfile_data <- read_csv(csv_file, skip = 71)\n\t\n\t# tidy data\n\ttidy_data <- file_data %>% \n\t\tslice(1:7) %>% \n\t\tselect(1:2) %>% \n\t\tjanitor::clean_names() %>% \n\t\tmutate(subject_profiles = as.numeric(subject_profiles))\n\t\n\t# save tidy data\n\twrite_csv(tidy_data, paste0(chart_details$id, \"-data.csv.gz\"))\t\n\t\n} else {\n\t\n\t# load tidy data\n\ttidy_data <- read_csv(paste0(chart_details$id, \"-data.csv.gz\"))\n\t\n}\n\nif (!file.exists(paste0(chart_details$id, \"-ethnicity-data.csv.gz\"))) {\n\n\tpop_data <- read_csv(\"https://www.ethnicity-facts-figures.service.gov.uk/uk-population-by-ethnicity/demographics/age-groups/latest/downloads/age-groups.csv\") %>% \n\t\tpivot_longer(-Ethnicity, names_to = \"age_group\", values_to = \"people\") %>% \n\t\tjanitor::clean_names() %>% \n\t\twrite_csv(paste0(chart_details$id, \"-ethnicity-data.csv.gz\"))\n\t\n} else {\n\t\n\t# load population data\n\tpop_data <- read_csv(paste0(chart_details$id, \"-ethnicity-data.csv.gz\"))\n\t\n}\n```\n\n```{r prepare data for chart}\n# harmonise population ethnicity categories\npop_data <- pop_data %>% \n\t\tmutate(ethnicity = case_when(\n\t\t\tstr_detect(ethnicity, \"White and Black\") ~ \n\t\t\t\t\"Black/African/Caribbean/Black British: Total\",\n\t\t\tstr_detect(ethnicity, \"White and Asian\") ~ \"Asian/Asian British: Total\",\n\t\t\tstr_detect(ethnicity, \"Other Mixed\") ~ \n\t\t\t\t\"Other ethnic group: Total\",\n\t\t\tTRUE ~ ethnicity\n\t\t)) %>% \n\t\tfilter(\n\t\t\tstr_detect(ethnicity, \"Total$\"), \n\t\t\t!age_group %in% c(\"All ages\", \"Age 0 to 4\", \"Age 5 to 7\", \"Age 8 to 9\")\n\t\t) %>% \n\t\tgroup_by(ethnicity) %>% \n\t\tsummarise(people = sum(people)) %>% \n\t\tfilter(ethnicity != \"Mixed/multiple ethnic group: Total\") %>% \n\t\tmutate(ethnicity = recode(\n\t\t\tethnicity, \n\t\t\t\"Asian/Asian British: Total\" = \"Asian\", \n\t\t\t\"Black/African/Caribbean/Black British: Total\" = \"Black\", \n\t\t\t\"Other ethnic group: Total\" = \"Other\", \n\t\t\t\"White: Total\" = \"White\"\n\t\t)) %>% \n\trename(population = people)\n\nchart_data <- tidy_data %>% \n\tmutate(ethnicity = case_when(\n\t\tethnic_appearance %in% c(\"White North European\", \"White South European\") ~ \n\t\t\t\"White\",\n\t\tethnic_appearance %in% c(\"Chinese, Japanese or SE Asian\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t \"Middle Eastern\") ~ \"Other\",\n\t\tTRUE ~ ethnic_appearance\n\t)) %>% \n\tgroup_by(ethnicity) %>% \n\tsummarise(profiles = sum(subject_profiles)) %>% \n\tleft_join(pop_data, by = \"ethnicity\") %>% \n\tdrop_na() %>% \n\tmutate(\n\t\t# decrease the number of profiles in each category by 14.1% to account for\n\t\t# the estimated proportion of DNA profiles that are duplicates\n\t\tprofiles = profiles * (1 - 0.141),\n\t\tnot_on_db = population - profiles\n\t) %>% \n\tselect(-population) %>% \n\tgather(\"on_ndnad\", \"people\", -ethnicity) %>% \n\tmutate(\n\t\tethnicity = factor(str_to_lower(ethnicity), \n\t\t\t\t\t\t\t\t\t\t\t levels = c(\"white\", \"asian\", \"black\", \"other\")),\n\t\tethnicity = fct_recode(ethnicity, \"Asian\" = \"asian\"),\n\t\ton_ndnad = on_ndnad == \"profiles\"\n\t) %>% \n\tarrange(desc(ethnicity)) %>% \n\tgroup_by(ethnicity) %>% \n\tmutate(\n\t\ton_ndnad = fct_rev(factor(on_ndnad)),\n\t\tpopulation = sum(people),\n\t\tprop = people / population,\n\t\txmin = ifelse(on_ndnad == TRUE, 0, 1 - prop),\n\t\txmax = ifelse(on_ndnad == TRUE, prop, 1)\n\t) %>% \n\tungroup() %>% \n\tgroup_by(on_ndnad) %>% \n\tmutate(\n\t\tymax = cumsum(population) + (sum(population) * 0.01),\n\t\tymin = ymax - population,\n\t\tycen = ymin + (0.5 * (ymax - ymin)),\n\t\tymax = ymax - (sum(population) * 0.01),\n\t\tlabel = ifelse(on_ndnad == TRUE, as.character(ethnicity), NA)\n\t) %>% \n\tungroup()\n\n# add chart labels\nchart_labels <- tribble(\n\t~x, ~y, ~xend, ~yend, ~label, ~hjust, ~vjust, ~curve,\n\t0.1, 56075912 * 0.5, 0.15, 56075912 * 0.5, balance_lines(\"most people on the DNA database are white, simply because most of the population is white\", 3), \"left\", \"center\", \"right\",\n\t0.13, 56075912 * 0.07, 0.18, 56075912 * 0.18, balance_lines(\"black people are twice as likely to have their DNA stored on the database, compared to white people\", 3), \"left\", \"bottom\", \"left\"\n)\n```\n\n```{r build plot}\nchart <- ggplot(chart_data, aes(xmin = xmin, ymin = ymin, xmax = xmax, ymax = ymax, \n\t\t\t\t\t\t\t\t\t\t\t fill = on_ndnad)) +\n\tgeom_rect() +\n\tgeom_text(aes(x = 1, y = ycen, label = label), hjust = 0, nudge_x = 0.01,\n\t\t\t\t\t\tna.rm = TRUE, size = (11 * 0.8) / (14 / 5), colour = \"grey30\") +\n\t# add explanatory labels\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"right\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_segment(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"straight\"), \n\t\t\t\t\t\t inherit.aes = FALSE, colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"left\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature * -1, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_label(aes(x = xend, y = yend, label = label, hjust = hjust, \n\t\t\t\t\t\t\t\t vjust = vjust),\n\t\t\t\t\t\tdata = chart_labels, inherit.aes = FALSE, \n\t\t\t\t\t\tcolour = \"black\",\n\t\t\t\t\t\tfill = ucl_colours_list[[\"Light Green\"]], \n\t\t\t\t\t\tsize = elements$label_text_size, \n\t\t\t\t\t\tlineheight = elements$label_text_lineheight,\n\t\t\t\t\t\tlabel.size = NA, show.legend = FALSE) +\n\t# end of explanatory labels\n\tscale_x_continuous(breaks = seq(0, 1, by = 0.1), \n\t\t\t\t\t\t\t\t\t\t labels = scales::percent_format(accuracy = 1), \n\t\t\t\t\t\t\t\t\t\t expand = expand_scale(mult = c(0, 0.05))) +\n\tscale_y_continuous(expand = c(0, 0), \n\t\t\t\t\t\t\t\t\t\t labels = scales::number_format(accuracy = 1, scale = 1/1e6, \n\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t suffix = \"m\")) +\n\t# the false value is a 90% tint from https://www.color-hex.com/color/500778\n  scale_fill_manual(\n    values = c(`TRUE` = ucl_colours_list[[\"Dark Green\"]], \n    \t\t\t\t\t `FALSE` = ucl_colours_list[[\"Light Green\"]]),\n    labels = c(`TRUE` = \"people on DNA database  \", \n    \t\t\t\t\t `FALSE` = \"people not on DNA database\")\n  ) +\n\tcoord_cartesian(clip = \"off\") +\n\tlabs(\n\t\ttitle = chart_details$title,\n\t\tsubtitle = format_subtitle(chart_details$subtitle),\n\t\tlegend = NULL,\n\t\tx = \"proportion of people in an ethnic group\",\n\t\ty = \"population\",\n\t\tfill = NULL\n\t) +\n\ttheme_cjcharts() +\n\ttheme(\n\t\tpanel.grid = element_blank()\n\t)\n```\n\n`r chart_details$subtitle`\n\n```{r display plot, echo=FALSE, include=TRUE}\nadd_logo(chart + labs(title = NULL, subtitle = NULL), \n\t\t\t\t chart_details$source_title, chart_details$id)\n```\n\n[larger image](../`r chart_details$id`.png)\n| [annotated R code to produce this chart](https://github.com/mpjashby/lesscrime.info/blob/master/content/post/`r chart_details$id`.Rmd)\n\nData source: [`r chart_details$source_title`](`r chart_details$source_url`)\n\nThe estimated proportion of people on the National DNA Database attempts to take \naccount of the presence of duplicate records on the database by reducing the \nnumber of samples in each category by 14.1%, the estimated proportion of records \nthat are duplicates. See the data source for more information.\n\nSince the National DNA Database does not have an equivalent ethnicity category\nto the 'Mixed/multiple ethnic group' categories in population data, people in \nthese groups have been categorised on this chart as being of Black, Asian or \nother ethnicity.\n\n```{r export chart}\n# save PNG for social media\nggsave(\n\tfilename = paste0(chart_details$id, \".png\"), \n\tplot = add_logo(chart, chart_details$source_title, chart_details$id), \n\tdevice = \"png\", width = 600 / 72, height = 400 / 72, units = \"in\"\n)\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.40","author":[{"name":"Matt Ashby"},"Matt Ashby"],"theme":["sandstone","../../custom.scss"],"date-format":"D MMM YYYY","title":"Chart: One in ten of us is on the National DNA Database","date":"2019-12-16","slug":"dna-database","categories":["Crime and justice chart of the week"],"tags":["DNA","criminal justice","ethnicity"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}