{"title":"Chart: What offences are people most often prosecuted for?","markdown":{"yaml":{"title":"Chart: What offences are people most often prosecuted for?","author":"Matt Ashby","date":"2020-01-06","slug":"common-prosecutions","categories":["Crime and justice chart of the week"],"tags":["criminal justice","courts"]},"headingText":"custom packages not loaded by helpers.R","containsRefs":false,"markdown":"\n\n```{r set knitr options, include=FALSE}\nknitr::opts_chunk$set(cache = TRUE, include=FALSE)\n```\n\n```{r set chart parameters}\nchart_details <- list(\n\tid = \"common-prosecutions\",\n\ttitle = \"What offences are people most often prosecuted for?\",\n\tsubtitle = \"About 1.4 million criminal cases were prosecuted in England and Wales last year. Motoring offences and minor non-violent offences such as TV licence evasion are the most commonly prosecuted, with many more cases in those categories dealt with by fixed penalties or other out-of-court disposals.\",\n\tsource_url = \"https://www.gov.uk/government/statistics/criminal-justice-system-statistics-quarterly-december-2018\",\n\tsource_title = \"Ministry of Justice, 2019\"\n)\n```\n\n```{r load packages and helper}\n\n# load this after loading custom packages\nsource(here::here(\"helpers.R\"))\n```\n\n```{r get and tidy data}\nif (!file.exists(paste0(chart_details$id, \"-data.csv.gz\"))) {\n\t\n\t# download data\n\tdata_file <- tempfile(fileext = \".zip\")\n\tGET(\"https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/804669/Data-behind-interactive-tools-csv.zip\", write_disk(data_file), progress())\n\n  # The downloaded data are in a .xls file, but the data are hidden in a pivot\n  # table rather than a simple sheet. The data can be revealed by right-clicking\n\t# the pivot table and clicking 'Show Details' then saving the resulting sheet\n\t# as a CSV file. The default MacOS unzip utility fails, but using Keka works.\n\tsystem(glue::glue(\"open -a Keka {data_file}\"))\n\t\n\t# read data\n\tfile_data <- read_csv(str_replace(data_file, \"\\\\.zip$\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/HO-code-principal-offence-2018.csv\"))\n\t\n\t# tidy data\n\ttidy_data <- file_data %>%\n\t\t# clean variable names\n\t\tclean_names()\n\t\n\t# save tidy data\n\twrite_csv(tidy_data, paste0(chart_details$id, \"-data.csv.gz\"))\t\n\t\n} else {\n\t\n\t# load tidy data\n\ttidy_data <- read_csv(paste0(chart_details$id, \"-data.csv.gz\"))\n\t\n}\n```\n\n```{r prepare plot data}\nchart_data <- tidy_data %>%\n\trename(year = year_of_appearance) %>% \n\tfilter(year %in% c(\"2016\", \"2017\", \"2018\")) %>% \n\tmutate(\n\t\toffence_name = case_when(\n\t\t\tdetailed_offence %in% c(\"Speeding offences detected by camera devices\", \"Speeding offences not detected by camera devices\") ~ \"speeding\",\n\t\t\tdetailed_offence == \"Television licence evasion\" ~ \"TV licence evasion\",\n\t\t\tdetailed_offence %in% c(\"Using motor vehicle uninsured against third party risks\", \"Keeping vehicle which does not meet insurance requirements\") ~ \"driving without insurance\",\n\t\t\tdetailed_offence == \"Keeper of vehicle or person other than keeper of vehicle failing to supply information as to driver's identity as required by or on behalf of Chief Officer of Police\" ~ \"not identifying driver to police\",\n\t\t\tdetailed_offence == \"Common assault and battery\" ~ \"common assault\",\n\t\t\tdetailed_offence == \"Keeping a motor vehicle on highway without a current vehicle excise licence\" ~ \"vehicle tax evasion\",\n\t\t\tdetailed_offence == \"Theft from shops\" ~ \"shoplifting\",\n\t\t\tdetailed_offence %in% c(\"Railway byelaws as to the conduct of passengers\", \"Summary offences under Midland Metro System Byelaws 1999\", \"Summary offences under Transport for London Regional Railway Network Byelaws\", \"Summary offences under Transport for London Road Transport Premises Byelaws\", \"Summary offences under Tyneside Metro Byelaws\") ~ \"railway byelaws\",\n\t\t\tdetailed_offence == c(\"Driving or attempting to drive a motor vehicle while having a breath, urine or blood alcohol concentration in excess of the prescribed limit\") | (str_detect(detailed_offence, \"drive\") & (str_detect(detailed_offence, \"drug\") | str_detect(detailed_offence, \"drink\"))) ~ \"drink/drug driving\",\n\t\t\t# detailed_offence %in% c(\"Other criminal damage\", \"Summary criminal or malicious damage\") ~ \"criminal damage\",\n\t\t\t# offence_group == \"05: Criminal damage and arson\" ~ \"criminal damage\",\n\t\t\tdetailed_offence == \"Depositing litter (Environmental Protection Act 1990)\" ~ \"littering\",\n\t\t\tdetailed_offence == \"Travelling by railway without paying correct fare, failing to show ticket, failing to give name and address, etc.\" ~ \"railway fare evasion\",\n\t\t\tdetailed_offence %in% c(\"Causing fear or provocation of violence\", \"Causing harassment, alarm or distress\", \"Causing intentional harassment alarm or distress\") ~ \"disorderly/threatening behaviour\",\n\t\t\tdetailed_offence == \"Offences related to stage carriage and public service vehicles\" ~ \"bus fare evasion\",\n\t\t\tdetailed_offence == \"Parent's failure to secure child's regular attendance at school\" ~ \"parent allowing truancy\",\n\t\t\tstr_detect(detailed_offence, \"^Burglary\") | detailed_offence == \"Other burglary in a dwelling\" ~ \"burglary\",\n\t\t\tdetailed_offence == \"Having possession of a controlled drug - class B (cannabis, including cannabis resin, cannabinol and cannabinol derivatives)\" ~ \"cannabis possession\",\n\t\t\tdetailed_offence == \"Careless driving  - without due care and attention or reasonable consideration for other road users\" ~ \"careless driving\",\n\t\t\t# detailed_offence == \"Using hand held mobile phone while driving\" ~ \"using mobile phone while driving\",\n\t\t\tdetailed_offence == \"Failing to comply with traffic lights, signals or signs (motor vehicles) - offences detected by camera devices\" ~ \"ignoring traffic signs/lights\",\n\t\t\tdetailed_offence == \"Absconding by person released on bail\" ~ \"absconding on bail\",\n\t\t\toffence == \"104 Assaulting, resisting or obstructing a constable or designated officer in execution of duty\" ~ \"assault on police\",\n\t\t\t# detailed_offence == \"Assaults occasioning actual bodily harm\" ~ \"actual bodily harm\",\n\t\t\toffence == \"8.10 Breach of a restraining order\" ~ \"breach restraining order\",\n\t\t\tdetailed_offence == \"Drunkenness, with aggravation - disorderly in a public place\" ~ \"drunk and disorderly\",\n\t\t\t# detailed_offence == \"Driving whilst disqualified from holding or obtaining a licence\" ~ \"disqualified driving\",\n\t\t\t# detailed_offence == \"Breach of a restraining order\" ~ \"breach of restraining order\",\n\t\t\t# detailed_offence == \"Assault on a constable\" ~ \"assault police\",\n\t\t\t# detailed_offence == \"Having an article with a blade or point in a public place\" ~ \"possess bladed article\",\n\t\t\t# detailed_offence == \"Offence of harassment\" ~ \"harassment\",\n\t\t\t# detailed_offence == \"Other summary non-motoring offences\" ~ \"other\",\n\t\t\tTRUE ~ \"other\"\n\t\t),\n\t\tmotoring = ifelse(\n\t\t\t(offence_type == \"04: Summary motoring\" & offence_name != \"other\") | \n\t\t\t\toffence_name == \"vehicle tax evasion\", \n\t\t\tTRUE, \n\t\t\tFALSE\n\t\t)\n\t) %>% \n\tcount(motoring, offence_name, year, wt = prosecuted) %>% \n\tgroup_by(motoring, offence_name) %>% \n\tsummarise(n = mean(n)) %>% \n\tungroup() %>% \n\tfilter(offence_name != \"other\") %>% \n\tarrange(desc(n)) %>% \n\tmutate(\n\t\toffence_name = \n\t\t\tfct_rev(as_factor(glue::glue(\"{row_number()}. {offence_name}\")))\n\t)\n\n# add chart labels\nchart_labels <- tribble(\n\t~x, ~y, ~xend, ~yend, ~label, ~hjust, ~vjust, ~curve,\n\t19.25, 177000, 16, 177000, balance_lines(\"speeding is the offence prosecuted most often, even though 90% of offences are dealt with by a fixed penalty rather than prosecution\", 6), \"right\", \"top\", \"left\",\n\t17.25, 120000, 13.5, 110000, balance_lines(\"many of the most commonly prosecuted offences typically involve prosecutions by TV Licensing or rail/bus/tram companies, rather than the Crown Prosecution Service\", 6), \"right\", \"top\", \"left\",\n\t9, 24000, 7.5, 35000, balance_lines(\"local authorities frequently prosecute for offences such as littering or failing to ensure a child attends school\", 4), \"left\", \"top\", \"left\"\n)\n```\n\n```{r build plot}\nchart <- ggplot(chart_data, aes(offence_name, n, fill = motoring)) +\n\tgeom_col() +\n\t# add explanatory labels\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"right\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_segment(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"straight\"), \n\t\t\t\t\t\t inherit.aes = FALSE, colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"left\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature * -1, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_label(aes(x = xend, y = yend, label = label, hjust = hjust, \n\t\t\t\t\t\t\t\t vjust = vjust),\n\t\t\t\t\t\tdata = chart_labels, inherit.aes = FALSE, \n\t\t\t\t\t\tcolour = elements$label_text_colour,\n\t\t\t\t\t\tfill = elements$label_text_fill, size = elements$label_text_size, \n\t\t\t\t\t\tlineheight = elements$label_text_lineheight,\n\t\t\t\t\t\tlabel.size = NA, show.legend = FALSE) +\n\t# end of explanatory labels\n\tscale_y_continuous(\n\t\tlabels = scales::number_format(accuracy = 1, scale = 1/1e3, suffix = \"k\"),\n\t\texpand = c(0, 0)\n\t) +\n\tscale_fill_manual(\n\t\tvalues = unname(ucl_colours_list[c(\"Bright Blue\", \"Bright Green\")]),\n\t\tlabels = c(`TRUE` = \"motoring\", `FALSE` = \"non-motoring\")\n\t) +\n\tcoord_flip() +\n\tlabs(\n    title = chart_details$title,\n    subtitle = format_subtitle(chart_details$subtitle),\n\t\tx = NULL,\n\t\ty = \"average annual prosecutions, 2016-18, excluding out-of-court disposals\",\n\t\talpha = NULL,\n\t\tfill = NULL\n\t) +\n\ttheme_cjcharts() +\n\ttheme(\n\t  axis.text.x = element_text(),\n\t  axis.text.y = element_text(hjust = 1),\n\t  axis.ticks.y = element_blank(),\n\t\tlegend.justification = \"right\",\n\t\tlegend.position = c(1, 0.1),\n\t\tpanel.grid.major.x = element_line(),\n\t\tpanel.grid.minor.x = element_line(),\n\t\tpanel.grid.major.y = element_blank()\n\t)\n```\n\n`r chart_details$subtitle`\n\n```{r display plot, echo=FALSE, include=TRUE}\nadd_logo(chart + labs(title = NULL, subtitle = NULL), \n\t\t\t\t chart_details$source_title, chart_details$id)\n```\n\n[larger image](../`r chart_details$id`.png)\n| [annotated R code to produce this chart](https://github.com/mpjashby/lesscrime.info/blob/master/content/post/`r chart_details$id`.Rmd)\n\nData source: [`r chart_details$source_title`](`r chart_details$source_url`)\n\n\n```{r export chart}\n# save PNG for social media\nggsave(\n\tfilename = paste0(chart_details$id, \".png\"), \n\tplot = add_logo(chart, chart_details$source_title, chart_details$id), \n\tdevice = \"png\", width = 600 / 72, height = 400 / 72, units = \"in\"\n)\n```\n","srcMarkdownNoYaml":"\n\n```{r set knitr options, include=FALSE}\nknitr::opts_chunk$set(cache = TRUE, include=FALSE)\n```\n\n```{r set chart parameters}\nchart_details <- list(\n\tid = \"common-prosecutions\",\n\ttitle = \"What offences are people most often prosecuted for?\",\n\tsubtitle = \"About 1.4 million criminal cases were prosecuted in England and Wales last year. Motoring offences and minor non-violent offences such as TV licence evasion are the most commonly prosecuted, with many more cases in those categories dealt with by fixed penalties or other out-of-court disposals.\",\n\tsource_url = \"https://www.gov.uk/government/statistics/criminal-justice-system-statistics-quarterly-december-2018\",\n\tsource_title = \"Ministry of Justice, 2019\"\n)\n```\n\n```{r load packages and helper}\n# custom packages not loaded by helpers.R\n\n# load this after loading custom packages\nsource(here::here(\"helpers.R\"))\n```\n\n```{r get and tidy data}\nif (!file.exists(paste0(chart_details$id, \"-data.csv.gz\"))) {\n\t\n\t# download data\n\tdata_file <- tempfile(fileext = \".zip\")\n\tGET(\"https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/804669/Data-behind-interactive-tools-csv.zip\", write_disk(data_file), progress())\n\n  # The downloaded data are in a .xls file, but the data are hidden in a pivot\n  # table rather than a simple sheet. The data can be revealed by right-clicking\n\t# the pivot table and clicking 'Show Details' then saving the resulting sheet\n\t# as a CSV file. The default MacOS unzip utility fails, but using Keka works.\n\tsystem(glue::glue(\"open -a Keka {data_file}\"))\n\t\n\t# read data\n\tfile_data <- read_csv(str_replace(data_file, \"\\\\.zip$\", \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"/HO-code-principal-offence-2018.csv\"))\n\t\n\t# tidy data\n\ttidy_data <- file_data %>%\n\t\t# clean variable names\n\t\tclean_names()\n\t\n\t# save tidy data\n\twrite_csv(tidy_data, paste0(chart_details$id, \"-data.csv.gz\"))\t\n\t\n} else {\n\t\n\t# load tidy data\n\ttidy_data <- read_csv(paste0(chart_details$id, \"-data.csv.gz\"))\n\t\n}\n```\n\n```{r prepare plot data}\nchart_data <- tidy_data %>%\n\trename(year = year_of_appearance) %>% \n\tfilter(year %in% c(\"2016\", \"2017\", \"2018\")) %>% \n\tmutate(\n\t\toffence_name = case_when(\n\t\t\tdetailed_offence %in% c(\"Speeding offences detected by camera devices\", \"Speeding offences not detected by camera devices\") ~ \"speeding\",\n\t\t\tdetailed_offence == \"Television licence evasion\" ~ \"TV licence evasion\",\n\t\t\tdetailed_offence %in% c(\"Using motor vehicle uninsured against third party risks\", \"Keeping vehicle which does not meet insurance requirements\") ~ \"driving without insurance\",\n\t\t\tdetailed_offence == \"Keeper of vehicle or person other than keeper of vehicle failing to supply information as to driver's identity as required by or on behalf of Chief Officer of Police\" ~ \"not identifying driver to police\",\n\t\t\tdetailed_offence == \"Common assault and battery\" ~ \"common assault\",\n\t\t\tdetailed_offence == \"Keeping a motor vehicle on highway without a current vehicle excise licence\" ~ \"vehicle tax evasion\",\n\t\t\tdetailed_offence == \"Theft from shops\" ~ \"shoplifting\",\n\t\t\tdetailed_offence %in% c(\"Railway byelaws as to the conduct of passengers\", \"Summary offences under Midland Metro System Byelaws 1999\", \"Summary offences under Transport for London Regional Railway Network Byelaws\", \"Summary offences under Transport for London Road Transport Premises Byelaws\", \"Summary offences under Tyneside Metro Byelaws\") ~ \"railway byelaws\",\n\t\t\tdetailed_offence == c(\"Driving or attempting to drive a motor vehicle while having a breath, urine or blood alcohol concentration in excess of the prescribed limit\") | (str_detect(detailed_offence, \"drive\") & (str_detect(detailed_offence, \"drug\") | str_detect(detailed_offence, \"drink\"))) ~ \"drink/drug driving\",\n\t\t\t# detailed_offence %in% c(\"Other criminal damage\", \"Summary criminal or malicious damage\") ~ \"criminal damage\",\n\t\t\t# offence_group == \"05: Criminal damage and arson\" ~ \"criminal damage\",\n\t\t\tdetailed_offence == \"Depositing litter (Environmental Protection Act 1990)\" ~ \"littering\",\n\t\t\tdetailed_offence == \"Travelling by railway without paying correct fare, failing to show ticket, failing to give name and address, etc.\" ~ \"railway fare evasion\",\n\t\t\tdetailed_offence %in% c(\"Causing fear or provocation of violence\", \"Causing harassment, alarm or distress\", \"Causing intentional harassment alarm or distress\") ~ \"disorderly/threatening behaviour\",\n\t\t\tdetailed_offence == \"Offences related to stage carriage and public service vehicles\" ~ \"bus fare evasion\",\n\t\t\tdetailed_offence == \"Parent's failure to secure child's regular attendance at school\" ~ \"parent allowing truancy\",\n\t\t\tstr_detect(detailed_offence, \"^Burglary\") | detailed_offence == \"Other burglary in a dwelling\" ~ \"burglary\",\n\t\t\tdetailed_offence == \"Having possession of a controlled drug - class B (cannabis, including cannabis resin, cannabinol and cannabinol derivatives)\" ~ \"cannabis possession\",\n\t\t\tdetailed_offence == \"Careless driving  - without due care and attention or reasonable consideration for other road users\" ~ \"careless driving\",\n\t\t\t# detailed_offence == \"Using hand held mobile phone while driving\" ~ \"using mobile phone while driving\",\n\t\t\tdetailed_offence == \"Failing to comply with traffic lights, signals or signs (motor vehicles) - offences detected by camera devices\" ~ \"ignoring traffic signs/lights\",\n\t\t\tdetailed_offence == \"Absconding by person released on bail\" ~ \"absconding on bail\",\n\t\t\toffence == \"104 Assaulting, resisting or obstructing a constable or designated officer in execution of duty\" ~ \"assault on police\",\n\t\t\t# detailed_offence == \"Assaults occasioning actual bodily harm\" ~ \"actual bodily harm\",\n\t\t\toffence == \"8.10 Breach of a restraining order\" ~ \"breach restraining order\",\n\t\t\tdetailed_offence == \"Drunkenness, with aggravation - disorderly in a public place\" ~ \"drunk and disorderly\",\n\t\t\t# detailed_offence == \"Driving whilst disqualified from holding or obtaining a licence\" ~ \"disqualified driving\",\n\t\t\t# detailed_offence == \"Breach of a restraining order\" ~ \"breach of restraining order\",\n\t\t\t# detailed_offence == \"Assault on a constable\" ~ \"assault police\",\n\t\t\t# detailed_offence == \"Having an article with a blade or point in a public place\" ~ \"possess bladed article\",\n\t\t\t# detailed_offence == \"Offence of harassment\" ~ \"harassment\",\n\t\t\t# detailed_offence == \"Other summary non-motoring offences\" ~ \"other\",\n\t\t\tTRUE ~ \"other\"\n\t\t),\n\t\tmotoring = ifelse(\n\t\t\t(offence_type == \"04: Summary motoring\" & offence_name != \"other\") | \n\t\t\t\toffence_name == \"vehicle tax evasion\", \n\t\t\tTRUE, \n\t\t\tFALSE\n\t\t)\n\t) %>% \n\tcount(motoring, offence_name, year, wt = prosecuted) %>% \n\tgroup_by(motoring, offence_name) %>% \n\tsummarise(n = mean(n)) %>% \n\tungroup() %>% \n\tfilter(offence_name != \"other\") %>% \n\tarrange(desc(n)) %>% \n\tmutate(\n\t\toffence_name = \n\t\t\tfct_rev(as_factor(glue::glue(\"{row_number()}. {offence_name}\")))\n\t)\n\n# add chart labels\nchart_labels <- tribble(\n\t~x, ~y, ~xend, ~yend, ~label, ~hjust, ~vjust, ~curve,\n\t19.25, 177000, 16, 177000, balance_lines(\"speeding is the offence prosecuted most often, even though 90% of offences are dealt with by a fixed penalty rather than prosecution\", 6), \"right\", \"top\", \"left\",\n\t17.25, 120000, 13.5, 110000, balance_lines(\"many of the most commonly prosecuted offences typically involve prosecutions by TV Licensing or rail/bus/tram companies, rather than the Crown Prosecution Service\", 6), \"right\", \"top\", \"left\",\n\t9, 24000, 7.5, 35000, balance_lines(\"local authorities frequently prosecute for offences such as littering or failing to ensure a child attends school\", 4), \"left\", \"top\", \"left\"\n)\n```\n\n```{r build plot}\nchart <- ggplot(chart_data, aes(offence_name, n, fill = motoring)) +\n\tgeom_col() +\n\t# add explanatory labels\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"right\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_segment(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"straight\"), \n\t\t\t\t\t\t inherit.aes = FALSE, colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_curve(aes(x = x, y = y, xend = xend, yend = yend),\n\t\t\t\t\t\t data = filter(chart_labels, curve == \"left\"), inherit.aes = FALSE, \n\t\t\t\t\t\t curvature = elements$label_line_curvature * -1, \n\t\t\t\t\t\t colour = elements$label_line_colour, \n\t\t\t\t\t\t arrow = elements$label_arrow, show.legend = FALSE) +\n\tgeom_label(aes(x = xend, y = yend, label = label, hjust = hjust, \n\t\t\t\t\t\t\t\t vjust = vjust),\n\t\t\t\t\t\tdata = chart_labels, inherit.aes = FALSE, \n\t\t\t\t\t\tcolour = elements$label_text_colour,\n\t\t\t\t\t\tfill = elements$label_text_fill, size = elements$label_text_size, \n\t\t\t\t\t\tlineheight = elements$label_text_lineheight,\n\t\t\t\t\t\tlabel.size = NA, show.legend = FALSE) +\n\t# end of explanatory labels\n\tscale_y_continuous(\n\t\tlabels = scales::number_format(accuracy = 1, scale = 1/1e3, suffix = \"k\"),\n\t\texpand = c(0, 0)\n\t) +\n\tscale_fill_manual(\n\t\tvalues = unname(ucl_colours_list[c(\"Bright Blue\", \"Bright Green\")]),\n\t\tlabels = c(`TRUE` = \"motoring\", `FALSE` = \"non-motoring\")\n\t) +\n\tcoord_flip() +\n\tlabs(\n    title = chart_details$title,\n    subtitle = format_subtitle(chart_details$subtitle),\n\t\tx = NULL,\n\t\ty = \"average annual prosecutions, 2016-18, excluding out-of-court disposals\",\n\t\talpha = NULL,\n\t\tfill = NULL\n\t) +\n\ttheme_cjcharts() +\n\ttheme(\n\t  axis.text.x = element_text(),\n\t  axis.text.y = element_text(hjust = 1),\n\t  axis.ticks.y = element_blank(),\n\t\tlegend.justification = \"right\",\n\t\tlegend.position = c(1, 0.1),\n\t\tpanel.grid.major.x = element_line(),\n\t\tpanel.grid.minor.x = element_line(),\n\t\tpanel.grid.major.y = element_blank()\n\t)\n```\n\n`r chart_details$subtitle`\n\n```{r display plot, echo=FALSE, include=TRUE}\nadd_logo(chart + labs(title = NULL, subtitle = NULL), \n\t\t\t\t chart_details$source_title, chart_details$id)\n```\n\n[larger image](../`r chart_details$id`.png)\n| [annotated R code to produce this chart](https://github.com/mpjashby/lesscrime.info/blob/master/content/post/`r chart_details$id`.Rmd)\n\nData source: [`r chart_details$source_title`](`r chart_details$source_url`)\n\n\n```{r export chart}\n# save PNG for social media\nggsave(\n\tfilename = paste0(chart_details$id, \".png\"), \n\tplot = add_logo(chart, chart_details$source_title, chart_details$id), \n\tdevice = \"png\", width = 600 / 72, height = 400 / 72, units = \"in\"\n)\n```\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"index.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.40","author":[{"name":"Matt Ashby"},"Matt Ashby"],"theme":["sandstone","../../custom.scss"],"date-format":"D MMM YYYY","title":"Chart: What offences are people most often prosecuted for?","date":"2020-01-06","slug":"common-prosecutions","categories":["Crime and justice chart of the week"],"tags":["criminal justice","courts"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}